â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    DATABASE CACHING SOLUTION - HOW IT WORKS                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ SCENARIO: Analyzing Opposition 91302017 with 50 serial numbers

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ FIRST RUN (Empty Cache)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Serial #1: 87654321
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Check Cache First   â”‚ âŒ NOT FOUND (Cache Miss)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Call TSDR API       â”‚ â±ï¸  3,000ms  ğŸ’° $0.01
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Call Anthropic API  â”‚ â±ï¸  1,500ms  ğŸ’° $0.015
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Save to Database    â”‚ âœ… Cached for future use
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   RESULT: â±ï¸  4,500ms  ğŸ’° $0.025

Serial #2: 88888888 ... (same process, 49 more times)

ğŸ“Š FIRST RUN TOTALS:
   â”œâ”€ Total Time: 225 seconds (4,500ms Ã— 50)
   â”œâ”€ TSDR API Calls: 50
   â”œâ”€ Anthropic API Calls: 50
   â”œâ”€ Total API Calls: 100
   â”œâ”€ Total Cost: $0.75
   â””â”€ Cache Status: 50 new records saved âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ SECOND RUN (Cache Populated)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Same opposition: 91302017 (same 50 serial numbers)

Serial #1: 87654321
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Check Cache First   â”‚ âœ… FOUND! (Cache Hit)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Return Cached Data  â”‚ â±ï¸  5ms  ğŸ’° $0.00
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   RESULT: â±ï¸  5ms  ğŸ’° $0.00  ğŸ‰ 900x FASTER!

Serial #2: 88888888 ... (same instant retrieval, 49 more times)

ğŸ“Š SECOND RUN TOTALS:
   â”œâ”€ Total Time: 0.25 seconds (5ms Ã— 50)
   â”œâ”€ TSDR API Calls: 0 (saved 50!)
   â”œâ”€ Anthropic API Calls: 0 (saved 50!)
   â”œâ”€ Total API Calls: 0 (saved 100!)
   â”œâ”€ Total Cost: $0.00 (saved $0.75!)
   â””â”€ Cache Status: 50 hits, 0 misses âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ MIXED SCENARIO (80% Cache Hit Rate)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

New opposition: 91345678 (50 serial numbers)
â””â”€ 40 serials already cached from previous opposition (80% overlap)
â””â”€ 10 serials are new (20% need API calls)

Serials #1-40: CACHED
   â”œâ”€ Time: 5ms each = 200ms total
   â”œâ”€ API Calls: 0
   â””â”€ Cost: $0.00

Serials #41-50: NEW
   â”œâ”€ Time: 4,500ms each = 45 seconds total
   â”œâ”€ API Calls: 20 (10 TSDR + 10 Anthropic)
   â””â”€ Cost: $0.15

ğŸ“Š MIXED RUN TOTALS:
   â”œâ”€ Total Time: 45.2 seconds (vs 225s without cache)
   â”œâ”€ Cache Hits: 40 (80%)
   â”œâ”€ Cache Misses: 10 (20%)
   â”œâ”€ API Calls: 20 (vs 100 without cache)
   â”œâ”€ Total Cost: $0.15 (vs $0.75 without cache)
   â””â”€ Savings: 80% faster, 80% cheaper! ğŸ‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¾ DATABASE STRUCTURE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

trademark_cache.db (SQLite Database)
â”‚
â”œâ”€ğŸ“‹ Table: trademark_cache
â”‚  â”œâ”€ serial_number (PRIMARY KEY) â† "87654321"
â”‚  â”œâ”€ mark_name â† "COCA-COLA"
â”‚  â”œâ”€ filing_date â† "2020-01-15"
â”‚  â”œâ”€ mark_type â† 2 (Stylized)
â”‚  â”œâ”€ us_classes â† [{"code": "032", "description": "Beverages"}]
â”‚  â”œâ”€ international_classes â† [{"code": "32", "description": "..."}]
â”‚  â”œâ”€ description â† "Soft drinks..."
â”‚  â””â”€ last_updated â† "2025-10-13 02:24:19" (for 30-day TTL)
â”‚
â”œâ”€ğŸ“Š Table: cache_stats
â”‚  â”œâ”€ timestamp â† "2025-10-13 02:24:19.123"
â”‚  â”œâ”€ operation â† "hit" (or "miss", "insert")
â”‚  â”œâ”€ serial_number â† "87654321"
â”‚  â””â”€ response_time_ms â† 5.2
â”‚
â””â”€âš™ï¸  Table: cache_config
   â”œâ”€ key â† "cache_ttl_days"
   â”œâ”€ value â† "30"
   â””â”€ updated_at â† "2025-10-13 00:00:00"

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â° CACHE INVALIDATION (30-Day TTL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DAY 1: Serial 87654321 cached
   â””â”€ last_updated: 2025-10-13

DAY 15: Same serial queried
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Check last_updated  â”‚ âœ… 15 days old (< 30 days)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Return Cached Data  â”‚ âœ… Still fresh!
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DAY 31: Same serial queried
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Check last_updated  â”‚ âŒ 31 days old (> 30 days)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Data is STALE       â”‚ âš ï¸  Needs refresh
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Call APIs Again     â”‚ ğŸ”„ Update cache
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Update last_updated â”‚ âœ… Fresh for 30 more days
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’° REAL-WORLD SAVINGS CALCULATOR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EXAMPLE: Law firm analyzing 10 oppositions/week

Week 1: 10 oppositions Ã— 30 serials = 300 queries
   â”œâ”€ Cache Hit Rate: 0% (first time)
   â”œâ”€ API Calls: 600 (300 TSDR + 300 Anthropic)
   â”œâ”€ Cost: $4.50
   â””â”€ Cache: 300 unique serials saved

Week 2: 10 oppositions Ã— 30 serials = 300 queries
   â”œâ”€ Serial Overlap with Week 1: 60% (same parties)
   â”œâ”€ Cache Hit Rate: 60%
   â”œâ”€ API Calls: 240 (120 new serials Ã— 2)
   â”œâ”€ Cost: $1.80 (saved $2.70!)
   â””â”€ Cache: +120 new serials

Week 3: 10 oppositions Ã— 30 serials = 300 queries
   â”œâ”€ Serial Overlap with Weeks 1-2: 75%
   â”œâ”€ Cache Hit Rate: 75%
   â”œâ”€ API Calls: 150 (75 new serials Ã— 2)
   â”œâ”€ Cost: $1.13 (saved $3.37!)
   â””â”€ Cache: +75 new serials

Week 4: 10 oppositions Ã— 30 serials = 300 queries
   â”œâ”€ Serial Overlap: 80%
   â”œâ”€ Cache Hit Rate: 80%
   â”œâ”€ API Calls: 120 (60 new serials Ã— 2)
   â”œâ”€ Cost: $0.90 (saved $3.60!)
   â””â”€ Cache: +60 new serials

ğŸ“Š MONTHLY TOTALS:
   â”œâ”€ Total Queries: 1,200
   â”œâ”€ Without Cache Cost: $18.00
   â”œâ”€ With Cache Cost: $8.33
   â”œâ”€ Monthly Savings: $9.67 (54%)
   â””â”€ Annual Savings: $116.04 ğŸ’°

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ KEY TAKEAWAYS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… FIRST QUERY: Slower (API calls) but cached for future
âœ… REPEATED QUERIES: 900x faster + FREE
âœ… PARTIAL OVERLAP: Proportional savings (80% hit = 80% savings)
âœ… AUTOMATIC REFRESH: Stale data (>30 days) updates automatically
âœ… ZERO MAINTENANCE: SQLite handles everything
âœ… REAL-TIME STATS: See savings in web UI sidebar

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ TRY IT NOW!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Open: http://localhost:8501
2. Search opposition: 91302017
3. Check sidebar for cache stats
4. Search same opposition again
5. See 900x speedup! ğŸ‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

